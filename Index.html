<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infográfico Interativo DEINF - Banco Central do Brasil</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f3f4f6; }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        /* Animation for connecting lines */
        .connector {
            position: absolute;
            background-color: #cbd5e1;
            z-index: 0;
            transition: all 0.3s ease;
        }

        .node-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .node-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        .node-active {
            border-color: #2563eb;
            background-color: #eff6ff;
            ring: 2px solid #2563eb;
        }

        /* Glassmorphism for the panel */
        .glass-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden text-slate-800">

    <!-- Header -->
    <header class="bg-slate-900 text-white p-4 shadow-lg z-20 flex justify-between items-center shrink-0">
        <div class="flex items-center gap-3">
            <div class="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center font-bold text-xl shadow-inner">
                BC
            </div>
            <div>
                <h1 class="text-xl font-bold tracking-tight">DEINF <span class="text-blue-400 font-light">Interactive Map</span></h1>
                <p class="text-xs text-slate-400">Departamento de Tecnologia da Informação - Estrutura & Pessoas</p>
            </div>
        </div>
        <div class="relative w-64 hidden md:block">
            <input type="text" id="searchInput" placeholder="Buscar unidade ou pessoa..." 
                class="w-full bg-slate-800 border border-slate-700 rounded-full py-2 px-4 text-sm focus:outline-none focus:border-blue-500 transition-colors text-white placeholder-slate-500">
            <svg class="w-4 h-4 text-slate-500 absolute right-3 top-2.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-1 flex overflow-hidden relative">
        
        <!-- Interactive Canvas (Left) -->
        <div class="flex-1 overflow-auto bg-slate-50 relative p-8" id="canvas-container">
            <!-- Central connection lines will be drawn here by JS if needed, but CSS grid is often cleaner -->
            
            <div class="max-w-6xl mx-auto space-y-12 pb-24">
                
                <!-- Level 0: The Head -->
                <div class="flex justify-center relative z-10">
                    <div onclick="selectNode('DEINF')" class="node-card cursor-pointer w-72 bg-white border-l-4 border-blue-600 rounded-r-lg shadow-md p-4 relative group">
                        <div class="absolute -left-1 top-0 bottom-0 w-1 bg-blue-600 rounded-l-lg group-hover:bg-blue-500 transition-colors"></div>
                        <h2 class="text-lg font-bold text-slate-900">DEINF</h2>
                        <p class="text-xs text-slate-500 uppercase tracking-wider font-semibold mb-1">Direção Geral</p>
                        <div class="flex items-center gap-2 mt-2">
                            <div class="w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center text-xs font-bold text-slate-600">C</div>
                            <div>
                                <p class="text-sm font-medium">Caio</p>
                                <p class="text-xs text-slate-400">Chefe do Departamento</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Vertical Connector -->
                <div class="absolute left-1/2 -translate-x-1/2 h-12 w-0.5 bg-slate-300 -mt-12 z-0 hidden md:block"></div>

                <!-- Level 1: Macro Units (GEDAI, VALOR, INFRA, etc) -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 relative z-10">
                    
                    <!-- GEDAI -->
                    <div onclick="selectNode('GEDAI')" class="node-card cursor-pointer bg-white rounded-xl shadow-sm border border-slate-200 p-5 hover:border-indigo-400">
                        <div class="flex justify-between items-start mb-2">
                            <span class="bg-indigo-100 text-indigo-700 text-xs font-bold px-2 py-1 rounded">ESTRATÉGICO</span>
                            <svg class="w-5 h-5 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path></svg>
                        </div>
                        <h3 class="font-bold text-lg text-slate-800">GEDAI</h3>
                        <p class="text-xs text-slate-500 mb-3">Eng. Dados e Arquitetura</p>
                        <div class="flex -space-x-2 overflow-hidden mb-2">
                            <div class="inline-block h-6 w-6 rounded-full ring-2 ring-white bg-indigo-500 flex items-center justify-center text-white text-[10px]" title="Eduardo Weller">EW</div>
                            <div class="inline-block h-6 w-6 rounded-full ring-2 ring-white bg-slate-400 flex items-center justify-center text-white text-[10px]" title="Cristiano Kliemann">CK</div>
                        </div>
                    </div>

                    <!-- VALOR -->
                    <div onclick="selectNode('VALOR')" class="node-card cursor-pointer bg-white rounded-xl shadow-sm border border-slate-200 p-5 hover:border-emerald-400">
                        <div class="flex justify-between items-start mb-2">
                            <span class="bg-emerald-100 text-emerald-700 text-xs font-bold px-2 py-1 rounded">NEGÓCIO</span>
                            <svg class="w-5 h-5 text-emerald-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path></svg>
                        </div>
                        <h3 class="font-bold text-lg text-slate-800">VALOR</h3>
                        <p class="text-xs text-slate-500 mb-3">Estratégia e Valor</p>
                        <div class="flex items-center gap-2">
                             <div class="inline-block h-6 w-6 rounded-full bg-emerald-600 flex items-center justify-center text-white text-[10px]">AB</div>
                             <span class="text-xs text-slate-600">André Bokel</span>
                        </div>
                    </div>

                     <!-- INFRA -->
                     <div onclick="selectNode('INFRA')" class="node-card cursor-pointer bg-white rounded-xl shadow-sm border border-slate-200 p-5 hover:border-orange-400">
                        <div class="flex justify-between items-start mb-2">
                            <span class="bg-orange-100 text-orange-700 text-xs font-bold px-2 py-1 rounded">OPERAÇÃO</span>
                            <svg class="w-5 h-5 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path></svg>
                        </div>
                        <h3 class="font-bold text-lg text-slate-800">INFRA</h3>
                        <p class="text-xs text-slate-500 mb-3">Infraestrutura TIC</p>
                        <div class="flex items-center gap-2">
                            <div class="inline-block h-6 w-6 rounded-full bg-orange-500 flex items-center justify-center text-white text-[10px]">O</div>
                            <span class="text-xs text-slate-600">Octávio</span>
                       </div>
                    </div>

                    <!-- GEGOV / ITSeC -->
                    <div class="space-y-4">
                        <div onclick="selectNode('GEGOV')" class="node-card cursor-pointer bg-white rounded-xl shadow-sm border border-slate-200 p-3 hover:border-slate-400 flex items-center gap-3">
                            <div class="bg-slate-100 p-2 rounded-lg text-slate-600"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></div>
                            <div>
                                <h4 class="font-bold text-sm text-slate-800">GEGOV</h4>
                                <p class="text-[10px] text-slate-500">Cláudio (Governança)</p>
                            </div>
                        </div>
                        <div onclick="selectNode('ITSeC')" class="node-card cursor-pointer bg-white rounded-xl shadow-sm border border-slate-200 p-3 hover:border-red-400 flex items-center gap-3">
                            <div class="bg-red-50 p-2 rounded-lg text-red-600"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg></div>
                            <div>
                                <h4 class="font-bold text-sm text-slate-800">ITSeC</h4>
                                <p class="text-[10px] text-slate-500">Veruska (Segurança)</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Level 2: Divisions Grid -->
                <div class="pt-8 border-t border-slate-200">
                    <h3 class="text-sm font-bold text-slate-400 uppercase tracking-widest mb-6">Divisões Operacionais & Fábricas</h3>
                    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4" id="divisions-grid">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- Special Section: DIMEX -->
                <div class="mt-8 bg-gradient-to-r from-slate-100 to-slate-200 rounded-xl p-6 border border-slate-300 relative overflow-hidden group cursor-pointer" onclick="selectNode('DIMEX')">
                    <div class="absolute right-0 top-0 h-full w-1 bg-slate-400 group-hover:bg-slate-600 transition-colors"></div>
                    <div class="relative z-10 flex justify-between items-center">
                        <div>
                            <h3 class="text-lg font-bold text-slate-800">DIMEX</h3>
                            <p class="text-sm text-slate-600">Manutenção e Evolução de Sistemas</p>
                        </div>
                        <div class="bg-white/50 p-2 rounded-full">
                            <svg class="w-6 h-6 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <!-- Info Panel (Right - Sliding) -->
        <aside id="info-panel" class="w-full md:w-96 glass-panel border-l border-slate-200 shadow-2xl transform translate-x-full transition-transform duration-300 absolute right-0 top-0 bottom-0 overflow-y-auto flex flex-col z-30 md:relative md:translate-x-0 md:hidden">
            
            <div class="p-6">
                <!-- Close Button (Mobile) -->
                <button onclick="closePanel()" class="md:hidden absolute top-4 right-4 text-slate-400 hover:text-slate-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>

                <div id="panel-content" class="space-y-6">
                    <!-- Default State -->
                    <div class="text-center mt-20 opacity-50">
                        <svg class="w-16 h-16 mx-auto text-slate-300 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"></path></svg>
                        <p class="text-slate-500 font-medium">Selecione uma unidade no mapa para ver detalhes, pessoas e projetos.</p>
                    </div>
                </div>
            </div>
        </aside>

    </main>

    <script>
        // --- DATA SOURCE ---
        const bcData = {
            "DEINF": {
                name: "DEINF",
                full_name: "Departamento de Tecnologia da Informação",
                head: "Caio (Ext. 2120)",
                gabinet: "Carina",
                description: "O sistema nervoso central do Banco Central. Responsável pela infraestrutura tecnológica que sustenta o SFN, incluindo Pix, Drex, STR e Open Finance. Transcendeu a função de suporte para se tornar um eixo estruturante da política monetária.",
                people: ["Haroldo Jayme Martins Froes Cruz (Diretor relacionado - inferido)"],
                tags: ["Estratégico", "Drex", "Pix", "Open Finance", "Segurança"]
            },
            "GEDAI": {
                name: "GEDAI",
                full_name: "Gerência de Engenharia de Dados e Arquitetura da Informação",
                head: "Eduardo Weller (Chefe Adjunto)",
                description: "Centro de excelência em governança de software e arquitetura. Define os padrões de desenvolvimento, plataformas de dados e inovação tecnológica. Impulsiona a adoção de Low-Code e novas arquiteturas (Microsserviços, Event-driven).",
                people: [
                    { name: "Eduardo Weller", role: "Chefe Adjunto / Líder Estratégico", note: "Foco na transformação digital e modernização." },
                    { name: "Cristiano Kliemann", role: "Senior Advisor / Arquiteto Chefe (Ex)", note: "GitHub: anogma. Padronização e arquitetura de software." },
                    { name: "Valdo Noronha", role: "Assessor de Inovação", note: "" }
                ],
                tags: ["Arquitetura", "Power Platform", "Dados", "Inovação", "Padronização"]
            },
            "VALOR": {
                name: "VALOR",
                full_name: "Gerência de Valor para Estratégias de Negócio",
                head: "André Bokel",
                description: "Focada no alinhamento estratégico entre TI e as áreas de negócio do Banco. Atua fortemente com SupTech (Tecnologia para Supervisão) e entrega de valor mensurável.",
                people: [
                    { name: "André Bokel", role: "Chefe de Unidade", note: "Liderança em estratégia de negócio." }
                ],
                tags: ["SupTech", "Estratégia", "Negócio", "Valor"]
            },
            "GEGOV": {
                name: "GEGOV",
                full_name: "Gerência de Governança e Capacidade de TI",
                head: "Cláudio (2120)",
                description: "Responsável pelo planejamento estratégico do departamento (PDTI), metodologia de priorização, gestão de talentos, contratos e orçamento.",
                tags: ["Governança", "Orçamento", "PDTI", "Processos"]
            },
            "INFRA": {
                name: "INFRA",
                full_name: "Gerência de Infraestrutura e Datacenter",
                head: "Octávio (2120)",
                description: "Garante o 'heartbeat' do banco. Gestão de datacenter, redes, servidores e hardware que suportam operações críticas 24/7.",
                tags: ["Datacenter", "Redes", "Hardware", "Disponibilidade"]
            },
            "ITSeC": {
                name: "ITSeC",
                full_name: "Escritório de Inovações Tecnológicas e Segurança Cibernética",
                head: "Veruska (2120)",
                description: "Foco duplo: Prospecção de novas tecnologias disruptivas e garantia da segurança cibernética do ecossistema do BC.",
                tags: ["Cybersecurity", "Inovação", "Segurança"]
            },
            "DIMEX": {
                name: "DIMEX",
                full_name: "Unidade de Manutenção e Evolução (Referência)",
                head: "Liderança Distribuída",
                description: "Referenciada em documentos como a 'Fábrica' ou área responsável pela manutenção e evolução contínua dos sistemas legados e novos. Frequentemente associada às divisões de desenvolvimento.",
                tags: ["Manutenção", "Legado", "Java", "Cobol", "Sustentação"]
            },
            // Divisions
            "DINAN": { head: "André Siqueira (3889)", desc: "Divisão de Soluções Analíticas e de Inteligência (Provável)", tags: ["Analytics", "BI"] },
            "DIVAP": { head: "Leandro Feres (4099)", desc: "Divisão de Aplicações e Projetos", tags: ["Dev", "Projetos"] },
            "DICAP": { head: "Sílvio Ferreira (81-4162)", desc: "Divisão Regional (Recife/Capitais)", tags: ["Regional"] },
            "DISOF": { head: "Henrique Cláudio (3640)", desc: "Soluções de TIC para a Fiscalização (SupTech)", tags: ["Fiscalização", "SupTech"] },
            "DIPIN": { head: "Henrique Gama (3334)", desc: "Soluções para Infraestrutura do SFN", tags: ["Infra SFN", "SPB"] },
            "DIREL": { head: "Ana Angélica (2544)", desc: "Soluções para Relacionamento Institucional", tags: ["Relacionamento", "Cidadão"] },
            "DISOG": { head: "Gustavo Escalda (31-7190)", desc: "Suporte e Gestão Organizacionais", tags: ["Suporte", "Gestão"] },
            "DIARQ": { head: "Leandro Teixeira (3009)", desc: "Arquitetura de Soluções", tags: ["Arquitetura"] },
            "DIATE": { head: "Otávio Carneiro (4117)", desc: "Atendimento ao Usuário (Provável)", tags: ["Suporte"] },
            "DIPRO": { head: "Bruno Viana (3318)", desc: "Produção / Processamento", tags: ["Produção"] },
            "DISEG": { head: "Márcio Rodrigues (2078)", desc: "Segurança da Informação", tags: ["InfoSec"] },
            "DIPEM": { head: "Frederico Lima (3681)", desc: "Política Econômica e Monetária", tags: ["Economia"] },
            "DIPIS": { head: "Chardeval Ferreira (2276)", desc: "Pessoas e Informação Interna", tags: ["RH", "Interno"] },
            "DIORG": { head: "Maurício Soares (3602)", desc: "Organização e Normas", tags: ["Normas"] },
            "DICOL": { head: "Gustavo Vieira (2107)", desc: "Colaboração e Produtividade", tags: ["Colaboração"] },
            "DISUL": { head: "Flávio Morimoto (3571)", desc: "Divisão Regional Sul", tags: ["Regional"] }
        };

        const divisionKeys = [
            "DINAN", "DIVAP", "DIARQ", "DISOF", "DIPIN", "DIREL", "DISOG", "DIATE", 
            "DIPRO", "DISEG", "DIPEM", "DIPIS", "DIORG", "DICOL", "DICAP", "DISUL"
        ];

        // --- RENDER DIVISIONS ---
        const grid = document.getElementById('divisions-grid');
        divisionKeys.forEach(key => {
            const divData = bcData[key];
            const el = document.createElement('div');
            el.className = 'bg-white p-3 rounded shadow-sm border border-slate-200 cursor-pointer hover:bg-blue-50 hover:border-blue-300 transition-colors text-center';
            el.onclick = () => selectNode(key);
            el.innerHTML = `
                <div class="font-bold text-slate-700 text-sm">${key}</div>
                <div class="text-[10px] text-slate-500 truncate">${divData.head.split(' ')[0]}</div>
            `;
            grid.appendChild(el);
        });

        // --- INTERACTION LOGIC ---
        const panel = document.getElementById('info-panel');
        const panelContent = document.getElementById('panel-content');
        let currentSelection = null;

        function selectNode(key) {
            // UI Feedback on nodes
            document.querySelectorAll('.node-active').forEach(el => el.classList.remove('node-active'));
            // Find the element clicked (simplification for prototype: finding by text content or ID if managed)
            // Ideally pass 'this' or ID. For now, we update the Panel.

            // Mobile logic: Show panel
            panel.classList.remove('translate-x-full');
            panel.classList.remove('hidden'); // For desktop toggle logic if needed
            if(window.innerWidth >= 768) {
               panel.classList.remove('md:hidden');
               panel.classList.add('md:flex');
            }

            const data = bcData[key] || { name: key, description: "Informações detalhadas não disponíveis." };

            let peopleHtml = '';
            if (data.people && Array.isArray(data.people)) {
                peopleHtml = `
                    <div class="mt-4">
                        <h5 class="text-xs font-bold text-slate-400 uppercase tracking-wide mb-2">Pessoas Chave</h5>
                        <ul class="space-y-2">
                            ${data.people.map(p => typeof p === 'string' ? 
                                `<li class="text-sm bg-slate-50 p-2 rounded border border-slate-100">${p}</li>` : 
                                `<li class="text-sm bg-slate-50 p-2 rounded border border-slate-100">
                                    <span class="font-semibold block text-slate-700">${p.name}</span>
                                    <span class="text-xs text-slate-500">${p.role}</span>
                                    ${p.note ? `<p class="text-[10px] text-slate-400 mt-1 italic">${p.note}</p>` : ''}
                                </li>`
                            ).join('')}
                        </ul>
                    </div>
                `;
            } else if (data.head) {
                 peopleHtml = `
                    <div class="mt-4">
                        <h5 class="text-xs font-bold text-slate-400 uppercase tracking-wide mb-2">Liderança</h5>
                        <div class="text-sm bg-slate-50 p-2 rounded border border-slate-100 font-semibold text-slate-700">
                            ${data.head}
                        </div>
                    </div>
                `;
            }

            let tagsHtml = '';
            if (data.tags) {
                tagsHtml = `
                    <div class="flex flex-wrap gap-2 mt-4">
                        ${data.tags.map(t => `<span class="px-2 py-1 bg-blue-100 text-blue-700 text-[10px] font-bold rounded-full uppercase">${t}</span>`).join('')}
                    </div>
                `;
            }

            panelContent.innerHTML = `
                <div class="animate-fade-in">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-2xl font-bold text-slate-800">${data.name}</h2>
                        <span class="text-xs bg-slate-200 text-slate-600 px-2 py-1 rounded">ID: ${key}</span>
                    </div>
                    ${data.full_name ? `<p class="text-sm font-medium text-blue-600 mb-4">${data.full_name}</p>` : ''}
                    
                    <div class="prose prose-sm text-slate-600">
                        <p>${data.description || data.desc || "Descrição não disponível para esta unidade."}</p>
                    </div>

                    ${peopleHtml}
                    ${tagsHtml}

                    <div class="mt-8 pt-4 border-t border-slate-200">
                        <h5 class="text-xs font-bold text-slate-400 uppercase tracking-wide mb-2">Ações Rápidas</h5>
                        <div class="grid grid-cols-2 gap-2">
                            <button class="flex items-center justify-center gap-1 px-3 py-2 bg-white border border-slate-300 rounded text-xs font-medium text-slate-600 hover:bg-slate-50">
                                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                                Contato
                            </button>
                            <button class="flex items-center justify-center gap-1 px-3 py-2 bg-white border border-slate-300 rounded text-xs font-medium text-slate-600 hover:bg-slate-50">
                                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg>
                                Projetos
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function closePanel() {
            panel.classList.add('translate-x-full');
            panel.classList.add('hidden'); // Hide on mobile close
            if(window.innerWidth >= 768) {
                 // On desktop, we might want to keep it or hide it. Let's hide it for consistency.
                 panel.classList.remove('md:flex');
                 panel.classList.add('md:hidden');
            }
        }

        // --- SEARCH FUNCTION ---
        document.getElementById('searchInput').addEventListener('input', (e) => {
            const term = e.target.value.toLowerCase();
            const allKeys = Object.keys(bcData);
            
            // Highlight nodes (simplistic implementation)
            const divisions = document.getElementById('divisions-grid').children;
            for (let div of divisions) {
                if (div.innerText.toLowerCase().includes(term)) {
                    div.style.opacity = '1';
                    div.style.borderColor = '#3b82f6';
                } else {
                    div.style.opacity = term ? '0.3' : '1';
                    div.style.borderColor = '#e2e8f0';
                }
            }
        });

    </script>
</body>
</html>
